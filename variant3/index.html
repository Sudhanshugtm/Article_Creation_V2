<!-- ABOUTME: Main HTML file for mobile article creation interface - Variant 3 -->
<!-- ABOUTME: Writing Coach experience - guides newcomers with contextual tips and progress tracking -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>New article</title>
    <link rel="stylesheet" href="node_modules/@wikimedia/codex-design-tokens/dist/theme-wikimedia-ui.css">
    <link rel="stylesheet" href="node_modules/@wikimedia/codex/dist/codex.style.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header" id="header">
            <button class="header-btn header-btn-left" id="closeBtn" aria-label="Close">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                    <path d="m4.34 2.93 12.73 12.73-1.41 1.41L2.93 4.35z"/>
                    <path d="M17.07 4.34 4.34 17.07l-1.41-1.41L15.66 2.93z"/>
                </svg>
            </button>
            <div class="header-divider" id="headerDivider" style="display: none;"></div>
            <div class="header-toolbar" id="headerToolbar" style="display: none;">
                <button class="toolbar-btn" id="undoBtnHeader" aria-label="Undo">
                    <img src="node_modules/@wikimedia/codex-icons/dist/images/undo.svg" alt="" width="20" height="20" class="toolbar-icon">
                </button>
                <button class="toolbar-btn" id="textFormatBtnHeader" aria-label="Text formatting">
                    <img src="node_modules/@wikimedia/codex-icons/dist/images/textStyle.svg" alt="" width="20" height="20" class="toolbar-icon">
                    <img src="node_modules/@wikimedia/codex-icons/dist/images/expand.svg" alt="" width="12" height="12" class="dropdown-indicator">
                </button>
                <button class="toolbar-btn" id="linkBtnHeader" aria-label="Insert link">
                    <img src="node_modules/@wikimedia/codex-icons/dist/images/link.svg" alt="" width="20" height="20" class="toolbar-icon">
                </button>
                <button class="toolbar-btn" id="quoteBtnHeader" aria-label="Insert quote">
                    <img src="node_modules/@wikimedia/codex-icons/dist/images/quotes.svg" alt="" width="20" height="20" class="toolbar-icon">
                </button>
                <button class="toolbar-btn" id="editBtnHeader" aria-label="Edit options">
                    <img src="node_modules/@wikimedia/codex-icons/dist/images/edit.svg" alt="" width="20" height="20" class="toolbar-icon">
                    <img src="node_modules/@wikimedia/codex-icons/dist/images/expand.svg" alt="" width="12" height="12" class="dropdown-indicator">
                </button>
            </div>
            <h1 class="header-title" id="headerTitle">New article</h1>
            <button class="header-btn header-btn-right" id="nextBtn" aria-label="Next">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                    <path d="M7 1 5.6 2.5 13 10l-7.4 7.5L7 19l9-9z"/>
                </svg>
            </button>
        </header>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Screen 1: Article Title + Topic Matching -->
            <div class="screen" id="screen1">
                <textarea
                    class="article-title-input"
                    id="articleTitle"
                    placeholder="Article title"
                    rows="1"
                ></textarea>

                <!-- Topic Matching Section -->
                <section class="topic-matching" id="topicMatching" style="display: none;">
                    <h2 class="topic-matching-title">Topic matching</h2>
                    <p class="topic-matching-description">Is your article about any of these topics?</p>

                    <ul class="topic-list" id="topicList">
                        <!-- Results will be inserted here -->
                    </ul>

                    <button class="topic-not-listed-btn" id="topicNotListedBtn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" class="btn-icon">
                            <path d="M11 9V4H9v5H4v2h5v5h2v-5h5V9z"/>
                        </svg>
                        <span>My topic isn't listed, let me choose a type</span>
                    </button>
                </section>
            </div>

            <!-- Screen 2: Choose a Type -->
            <div class="screen" id="screen2" style="display: none;">
                <h2 class="type-selection-title" id="typeSelectionTitle">What is "Siberian Tiger" about?</h2>
                <p class="type-selection-description">Choose a category to help us suggest the right structure for this article.</p>

                <!-- Search Input -->
                <div class="search-box">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" class="search-icon">
                        <path d="M12.2 13.6a7 7 0 1 1 1.4-1.4l5.4 5.4-1.4 1.4zM3 8a5 5 0 1 0 10 0A5 5 0 0 0 3 8"/>
                    </svg>
                    <input type="text" class="search-input" id="typeSearchInput" placeholder="Search article types">
                </div>

                <!-- Category List -->
                <ul class="category-list" id="categoryList">
                    <!-- Categories will be inserted here -->
                </ul>
            </div>

            <!-- Screen 2.5: Add Sources (Optional) -->
            <div class="screen" id="screen25" style="display: none;">
                <h2 class="add-sources-title" id="addSourcesTitle">Add key sources</h2>
                <p class="add-sources-description">Share sources with reliable information about this topic. This helps reviewers and readers verify what you write.</p>

                <div class="sources-input-container" id="sourcesInputContainer">
                    <div class="source-input-row">
                        <div class="cdx-text-input">
                            <input class="cdx-text-input__input" type="url" placeholder="Paste a URL here..." />
                        </div>
                    </div>
                    <div class="source-input-row">
                        <div class="cdx-text-input">
                            <input class="cdx-text-input__input" type="url" placeholder="Paste a URL here..." />
                        </div>
                    </div>
                </div>

                <button class="cdx-button cdx-button--weight-quiet cdx-button--size-small add-another-source-btn" id="addAnotherSourceBtn">
                    <span class="cdx-icon cdx-icon--medium">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                            <path d="M11 9V4H9v5H4v2h5v5h2v-5h5V9z"/>
                        </svg>
                    </span>
                    <span>Add another source</span>
                </button>

                <div class="sources-actions-container">
                    <button class="cdx-button cdx-button--weight-primary cdx-button--action-progressive start-writing-btn" id="startWritingBtn">
                        <span>Start writing</span>
                    </button>

                    <button class="cdx-button cdx-button--weight-quiet cdx-button--action-progressive skip-sources-btn" id="skipSourcesBtn">
                        <span>I'll add sources later</span>
                    </button>
                </div>
            </div>

            <!-- Screen 3: Article Editor with Writing Coach -->
            <div class="screen" id="screen3" style="display: none;">
                <!-- Writing Progress Indicator -->
                <div class="writing-progress-container" id="writingProgressContainer">
                    <div class="progress-header">
                        <span class="progress-label">Article Progress</span>
                        <span class="progress-percentage" id="progressPercentage">0%</span>
                    </div>
                    <div class="progress-bar-track">
                        <div class="progress-bar-fill" id="progressBarFill" style="width: 0%;"></div>
                    </div>
                    <div class="progress-milestones">
                        <span class="milestone" data-milestone="intro">Intro</span>
                        <span class="milestone" data-milestone="body">Body</span>
                        <span class="milestone" data-milestone="sources">Sources</span>
                        <span class="milestone" data-milestone="complete">Complete</span>
                    </div>
                </div>

                <!-- Article Sections Container -->
                <div class="article-sections" id="articleSections">
                    <!-- Lead Section Block (always present) -->
                    <div class="section-block" id="leadSectionBlock" data-section-name="Lead section">
                        <div class="section-content-area">
                            <div
                                class="section-textarea"
                                id="editorTextarea"
                                contenteditable="true"
                                data-placeholder="Begin writing about Siberian tiger..."
                            ></div>
                        </div>
                        <div class="section-action-buttons">
                            <button class="section-writing-tips-btn" id="writingTipsBtn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 20 20" class="btn-icon">
                                    <path d="M10 0C4.477 0 0 4.477 0 10s4.477 10 10 10 10-4.477 10-10S15.523 0 10 0zm1 16H9v-2h2v2zm0-4H9V4h2v8z"/>
                                </svg>
                                Writing tips
                            </button>
                            <button class="section-see-examples-btn" id="seeExamplesBtn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 20 20" class="btn-icon">
                                    <path d="M10 12.5c-2 0-4-1.5-5-3.5 1-2 3-3.5 5-3.5s4 1.5 5 3.5c-1 2-3 3.5-5 3.5zm0-5.5a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
                                </svg>
                                See examples
                            </button>
                            <button class="section-add-source-btn" id="sectionAddSourceBtn">Add source</button>
                        </div>
                    </div>
                </div>

                <!-- Writing Coach Panel -->
                <div class="writing-coach-panel" id="writingCoachPanel">
                    <div class="coach-panel-header">
                        <div class="coach-avatar">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 20 20">
                                <path d="M10 0C4.477 0 0 4.477 0 10s4.477 10 10 10 10-4.477 10-10S15.523 0 10 0zm1 16H9v-2h2v2zm2.07-7.75l-.9.92c-.5.51-.86.97-1.04 1.69-.08.32-.13.68-.13 1.14H9v-.5c0-.46.08-.9.22-1.31.2-.58.53-1.1.95-1.52l1.24-1.26c.46-.44.68-1.1.55-1.77a1.98 1.98 0 0 0-1.56-1.56A2.006 2.006 0 0 0 8 6c0 .55.45 1 1 1h.01c.55 0 1-.45 1-1H12c.05.27.07.54.07.82 0 .56-.23 1.07-.61 1.43z"/>
                            </svg>
                        </div>
                        <h2 class="coach-panel-title">Writing Coach</h2>
                        <button class="panel-close-btn" id="coachPanelCloseBtn" aria-label="Close panel">
                            <img src="node_modules/@wikimedia/codex-icons/dist/images/close.svg" alt="" width="20" height="20">
                        </button>
                    </div>

                    <div class="coach-panel-content">
                        <!-- Current Section Tips -->
                        <div class="coach-section" id="currentSectionTips">
                            <h3 class="coach-section-title">Tips for the Lead Section</h3>
                            <ul class="coach-tips-list">
                                <li class="coach-tip" data-tip="definition">
                                    <span class="tip-checkbox"></span>
                                    <span class="tip-text">Start with what the topic IS (definition)</span>
                                </li>
                                <li class="coach-tip" data-tip="classification">
                                    <span class="tip-checkbox"></span>
                                    <span class="tip-text">Include the scientific classification</span>
                                </li>
                                <li class="coach-tip" data-tip="location">
                                    <span class="tip-checkbox"></span>
                                    <span class="tip-text">Mention where it is found</span>
                                </li>
                                <li class="coach-tip" data-tip="notable">
                                    <span class="tip-checkbox"></span>
                                    <span class="tip-text">Add what makes it notable</span>
                                </li>
                            </ul>
                        </div>

                        <!-- Sentence Starters -->
                        <div class="coach-section" id="sentenceStartersSection">
                            <h3 class="coach-section-title">Try starting with...</h3>
                            <div class="sentence-starters-list" id="sentenceStartersList">
                                <!-- Sentence starters will be populated by JavaScript -->
                            </div>
                        </div>

                        <!-- Quality Checklist -->
                        <div class="coach-section" id="qualityChecklistSection">
                            <h3 class="coach-section-title">Article Quality Checklist</h3>
                            <ul class="quality-checklist" id="qualityChecklist">
                                <li class="checklist-item" data-check="neutral">
                                    <span class="checklist-checkbox"></span>
                                    <span class="checklist-text">Written in neutral tone</span>
                                </li>
                                <li class="checklist-item" data-check="sources">
                                    <span class="checklist-checkbox"></span>
                                    <span class="checklist-text">Has at least one source</span>
                                </li>
                                <li class="checklist-item" data-check="length">
                                    <span class="checklist-checkbox"></span>
                                    <span class="checklist-text">At least 100 words</span>
                                </li>
                                <li class="checklist-item" data-check="sections">
                                    <span class="checklist-checkbox"></span>
                                    <span class="checklist-text">Multiple sections added</span>
                                </li>
                            </ul>
                        </div>

                        <!-- View Article Outline Button -->
                        <button class="view-outline-btn" id="viewOutlineBtn">
                            <img src="node_modules/@wikimedia/codex-icons/dist/images/listBullet.svg" alt="" width="20" height="20">
                            <span>View full article outline</span>
                        </button>
                    </div>
                </div>

                <!-- Example Paragraphs Panel (Inspiration Panel) -->
                <div class="examples-panel" id="examplesPanel" style="display: none;">
                    <div class="examples-panel-header">
                        <h2 class="examples-panel-title">Example Paragraphs</h2>
                        <p class="examples-panel-subtitle">Learn from similar Wikipedia articles</p>
                        <button class="panel-close-btn" id="examplesPanelCloseBtn" aria-label="Close examples panel">
                            <img src="node_modules/@wikimedia/codex-icons/dist/images/close.svg" alt="" width="20" height="20">
                        </button>
                    </div>

                    <div class="examples-panel-content" id="examplesPanelContent">
                        <!-- Example paragraphs will be populated by JavaScript -->
                    </div>

                    <div class="examples-panel-footer">
                        <p class="examples-notice">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 20 20" class="notice-icon">
                                <path d="M10 0C4.477 0 0 4.477 0 10s4.477 10 10 10 10-4.477 10-10S15.523 0 10 0zm1 16H9v-2h2v2zm0-4H9V4h2v8z"/>
                            </svg>
                            <span>These are for inspiration only. Write your own original content.</span>
                        </p>
                    </div>
                </div>

                <!-- Article Outline Panel -->
                <div class="article-outline-panel" id="articleOutlinePanel" style="display: none;">
                    <div class="outline-panel-header">
                        <div class="outline-header-content">
                            <h2 class="outline-panel-title">Article outline</h2>
                            <p class="outline-panel-subtitle">Based on common animal articles</p>
                        </div>
                        <button class="panel-close-btn" id="outlinePanelCloseBtn" aria-label="Close outline panel">
                            <img src="node_modules/@wikimedia/codex-icons/dist/images/close.svg" alt="" width="20" height="20">
                        </button>
                    </div>

                    <div class="outline-sections">
                        <div class="outline-section">
                            <div class="outline-section-content">
                                <h3 class="outline-section-title">Lead section</h3>
                                <p class="outline-section-description">A short summary of the topic.</p>
                            </div>
                            <span class="outline-added-badge">Added</span>
                        </div>

                        <div class="outline-section">
                            <div class="outline-section-content">
                                <h3 class="outline-section-title">Characteristics</h3>
                                <p class="outline-section-description">Physical traits and appearance.</p>
                            </div>
                            <button class="outline-add-btn">Add</button>
                        </div>

                        <div class="outline-section">
                            <div class="outline-section-content">
                                <h3 class="outline-section-title">Distribution and habitat</h3>
                                <p class="outline-section-description">Where it lives and its environment.</p>
                            </div>
                            <button class="outline-add-btn">Add</button>
                        </div>

                        <div class="outline-section">
                            <div class="outline-section-content">
                                <h3 class="outline-section-title">Ecology and behaviour</h3>
                                <p class="outline-section-description">Diet, activity and social behaviour.</p>
                            </div>
                            <button class="outline-add-btn">Add</button>
                        </div>

                        <button class="add-custom-section-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" class="add-icon">
                                <path d="M11 9V4H9v5H4v2h5v5h2v-5h5V9z"/>
                            </svg>
                            <span>Add custom section...</span>
                        </button>
                    </div>
                </div>

                <!-- Add Custom Section Dialog -->
                <div class="custom-section-dialog" id="customSectionDialog" style="display: none;">
                    <div class="dialog-overlay"></div>
                    <div class="dialog-content">
                        <div class="dialog-header">
                            <h2 class="dialog-title">Add custom section</h2>
                            <button class="panel-close-btn" id="dialogCloseBtn" aria-label="Close dialog">
                                <img src="node_modules/@wikimedia/codex-icons/dist/images/close.svg" alt="" width="20" height="20">
                            </button>
                        </div>

                        <div class="dialog-body">
                            <label class="input-label" for="customSectionInput">Section name</label>
                            <input
                                type="text"
                                class="custom-section-input"
                                id="customSectionInput"
                                placeholder="e.g., Conservation efforts"
                            />

                            <label class="input-label" for="customSectionDescription">Description (optional)</label>
                            <textarea
                                class="custom-section-textarea"
                                id="customSectionDescription"
                                placeholder="Brief description of what this section will cover..."
                                rows="3"
                            ></textarea>
                        </div>

                        <div class="dialog-footer">
                            <button class="dialog-btn dialog-btn-secondary" id="cancelCustomSectionBtn">Cancel</button>
                            <button class="dialog-btn dialog-btn-primary" id="addCustomSectionBtn">Add section</button>
                        </div>
                    </div>
                </div>

                <!-- Citation Dialog -->
                <div class="dialog-overlay" id="citationDialog" style="display: none;">
                    <div class="dialog-container citation-dialog">
                        <div class="dialog-header">
                            <div>
                                <h2 class="dialog-title" id="citationDialogTitle">Add a source</h2>
                            </div>
                            <button class="dialog-close-btn" id="citationDialogCloseBtn" aria-label="Close">
                                <img src="node_modules/@wikimedia/codex-icons/dist/images/close.svg" alt="" width="20" height="20">
                            </button>
                        </div>

                        <div class="dialog-body">
                            <div class="citation-sources" id="citationSourcesList">
                                <!-- Sources will be dynamically inserted -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
